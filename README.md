# Signalist - Stock Market Tracking Platform

A modern, full-stack stock market tracking application built with Next.js 15, featuring real-time financial data, AI-powered insights, and intelligent price alerts.

![Next.js](https://img.shields.io/badge/Next.js-15.5.2-black?style=flat-square&logo=next.js)
![React](https://img.shields.io/badge/React-19.1.0-blue?style=flat-square&logo=react)
![TypeScript](https://img.shields.io/badge/TypeScript-5-blue?style=flat-square&logo=typescript)
![MongoDB](https://img.shields.io/badge/MongoDB-6.19.0-green?style=flat-square&logo=mongodb)
![License](https://img.shields.io/badge/License-Private-red?style=flat-square)

## Overview

**Signalist** is a production-ready stock tracking platform that enables users to monitor stocks, create personalized watchlists, set intelligent price alerts, and receive AI-generated daily market summaries. Built with modern web technologies and an event-driven architecture, it demonstrates enterprise-level patterns while maintaining a clean, intuitive user experience.

### Key Highlights

- Real-time stock data integration via Finnhub API
- AI-powered personalized email summaries using Google Gemini
- Event-driven architecture with Inngest for background workflows
- Secure authentication with Better Auth
- Interactive TradingView charts and technical analysis
- Responsive, accessible UI with Shadcn components

## Features

### Core Functionality

**Authentication & User Management**
- Email/password registration with session-based auth
- User profiles with investment preferences (goals, risk tolerance, industry)
- Protected routes and middleware-level security
- Auto sign-in after registration

**Stock Search & Discovery**
- Real-time stock search with typeahead suggestions
- Comprehensive company profiles with financial data
- Multiple chart types (candlestick, technical indicators, financials)
- Command palette (Cmd+K) for quick navigation

**Watchlist Management**
- Add/remove stocks to personal watchlist
- Persistent storage in MongoDB
- Duplicate prevention with unique constraints
- Real-time UI updates with optimistic rendering

**Price Alert System**
- Create custom price alerts (upper/lower thresholds)
- Alert naming and organization
- Toggle alerts on/off
- Per-stock alert management
- Foundation for automated monitoring

**AI-Powered Email Features**
- Personalized welcome emails generated by Gemini AI
- Daily market summaries tailored to user's watchlist
- Intelligent news filtering and summarization
- Scheduled delivery at 12 PM UTC

**Dashboard & Analytics**
- Market overview widget
- Stock heatmap visualization
- Top market stories
- Real-time quotes and data

## Tech Stack

### Frontend
- **Next.js 15.5.2** - React framework with App Router and Turbopack
- **React 19.1.0** - Latest React with Server Components
- **TypeScript 5** - End-to-end type safety
- **TailwindCSS 4** - Utility-first styling
- **Shadcn UI** - Accessible component library (Radix UI)
- **Lucide React** - Icon library
- **React Hook Form** - Form state management
- **Sonner** - Toast notifications

### Backend
- **Next.js Server Actions** - Type-safe RPC-style API calls
- **MongoDB 6.19.0** - NoSQL database (Atlas Cloud)
- **Mongoose 8.18.0** - ODM with schema validation
- **Better Auth 1.3.7** - Modern authentication framework
- **Inngest 3.40.1** - Event-driven background workflows

### External Services
- **Finnhub API** - Real-time financial data and news
- **Google Gemini 2.5 Flash** - AI text generation
- **TradingView Widgets** - Interactive stock charts
- **Nodemailer 7.0.6** - Email delivery

## Project Structure

```
signalist-stock-tracker/
├── app/                          # Next.js App Router
│   ├── api/
│   │   ├── auth/[...all]/       # Authentication endpoints
│   │   └── inngest/             # Event webhook receiver
│   ├── (auth)/                  # Authentication pages
│   │   ├── sign-in/
│   │   └── sign-up/
│   └── (root)/                  # Protected app routes
│       ├── page.tsx             # Dashboard
│       ├── stocks/[symbol]/     # Stock detail pages
│       └── watchlist/           # User watchlist
│
├── components/                   # React components
│   ├── ui/                      # Shadcn UI primitives
│   ├── forms/                   # Form components
│   ├── Header.tsx               # Navigation
│   ├── SearchCommand.tsx        # Stock search (Cmd+K)
│   ├── WatchlistButton.tsx      # Add/remove stocks
│   ├── WatchlistTable.tsx       # Watchlist display
│   ├── AlertModal.tsx           # Price alert creation
│   └── TradingViewWidget.tsx    # Embedded charts
│
├── database/                     # Database layer
│   ├── mongoose.ts              # Connection singleton
│   └── models/
│       ├── watchlist.model.ts   # Watchlist schema
│       └── alert.model.ts       # Alert schema
│
├── lib/                          # Business logic
│   ├── actions/                 # Server Actions
│   │   ├── auth.actions.ts
│   │   ├── user.actions.ts
│   │   ├── watchlist.actions.ts
│   │   ├── alert.actions.ts
│   │   └── finnhub.actions.ts
│   ├── better-auth/             # Auth configuration
│   ├── inngest/                 # Event workflows
│   │   ├── client.ts
│   │   ├── functions.ts
│   │   └── prompts.ts
│   ├── nodemailer/              # Email service
│   └── constants.ts
│
├── middleware.ts                 # Auth middleware
└── package.json                  # Dependencies
```

## Architecture

### Event-Driven Workflows (Inngest)

**Welcome Email Workflow**
```
User Registration → app/user.created event
  → Fetch user profile
  → Generate personalized intro with Gemini AI
  → Send welcome email via Nodemailer
```

**Daily News Summary Workflow**
```
Cron (12 PM UTC) → app/stock.news.summary event
  → Fetch all users
  → For each user:
    → Get watchlist stocks
    → Fetch news from Finnhub
    → Generate AI summary with Gemini
    → Send personalized email
```

### Authentication Flow

```
Sign Up → Validation → Better Auth creates user & session
  → Set secure HTTP-only cookie
  → Trigger user.created event
  → Auto sign-in
  → Redirect to dashboard
  → Inngest sends welcome email (async)
```

### Database Schema

**Users Collection** (Better Auth managed)
```typescript
{
  id: string
  email: string (unique)
  name: string
  country: string
  investmentGoals: string
  riskTolerance: string
  preferredIndustry: string
  createdAt: Date
}
```

**Watchlist Collection**
```typescript
{
  userId: string (indexed)
  symbol: string (uppercase, indexed)
  company: string
  addedAt: Date
  // Unique constraint: { userId, symbol }
}
```

**Alerts Collection**
```typescript
{
  userId: string (indexed)
  symbol: string (uppercase)
  company: string
  alertName: string
  alertType: 'upper' | 'lower'
  threshold: number
  isActive: boolean
  createdAt: Date
  triggeredAt?: Date
}
```

## Setup & Installation

### Prerequisites

- Node.js 18+
- MongoDB Atlas account (or local MongoDB)
- Finnhub API key (free tier available)
- Google Gemini API key
- Gmail account for Nodemailer (optional)

### Environment Variables

Create a `.env` file in the root directory:

```env
NODE_ENV=development
NEXT_PUBLIC_BASE_URL=http://localhost:3002

# Finnhub API - Get free key at https://finnhub.io/register
FINNHUB_API_KEY=your_finnhub_key
NEXT_PUBLIC_FINNHUB_API_KEY=your_finnhub_key
FINNHUB_BASE_URL=https://finnhub.io/api/v1

# MongoDB
MONGODB_URI=mongodb+srv://user:password@cluster.mongodb.net/signalist

# Better Auth
BETTER_AUTH_SECRET=your_32_byte_secret
BETTER_AUTH_URL=http://localhost:3002

# Gemini AI - Get key at https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_gemini_key

# Nodemailer (Optional)
NODEMAILER_EMAIL=your_email@gmail.com
NODEMAILER_PASSWORD=your_app_password
```

### Installation Steps

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd signalist-stock-tracker
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Configure environment variables**
   - Copy `.env.example` to `.env`
   - Fill in all required API keys and credentials

4. **Start development servers**

   Terminal 1 - Next.js:
   ```bash
   npm run dev
   ```

   Terminal 2 - Inngest (for background jobs):
   ```bash
   npx inngest-cli@latest dev
   ```

5. **Access the application**
   - App: http://localhost:3002
   - Inngest Dashboard: http://localhost:8288

### Testing Database Connection

```bash
npm run test:db
```

## Deployment

### Production Build

```bash
npm run build
npm start
```

### Recommended Hosting

- **Vercel** - Optimized for Next.js (recommended)
- **AWS** - Flexible, scalable
- **Railway** - Simple deployment with database hosting
- **DigitalOcean** - Cost-effective VPS option

### Production Checklist

- [ ] Set `NODE_ENV=production`
- [ ] Update `NEXT_PUBLIC_BASE_URL` and `BETTER_AUTH_URL`
- [ ] Secure all API keys
- [ ] Configure MongoDB Atlas IP whitelist
- [ ] Set up Inngest production environment
- [ ] Configure custom domain
- [ ] Enable HTTPS
- [ ] Set up error monitoring (Sentry, etc.)

## API Documentation

### Server Actions (RPC-style)

**Watchlist Actions**
```typescript
// lib/actions/watchlist.actions.ts
addToWatchlist(userId, symbol, company)
removeFromWatchlist(userId, symbol)
getUserWatchlist(userId)
isInWatchlist(userId, symbol)
```

**Alert Actions**
```typescript
// lib/actions/alert.actions.ts
createAlert(userId, symbol, company, alertName, alertType, threshold)
getUserAlerts(userId, symbol)
deleteAlert(alertId)
toggleAlertStatus(alertId, isActive)
```

**Finnhub Actions**
```typescript
// lib/actions/finnhub.actions.ts
searchStocks(query)
getStockQuote(symbol)
getCompanyProfile(symbol)
getMarketNews()
```

### Authentication Endpoints

```
POST   /api/auth/sign-up      - Register new user
POST   /api/auth/sign-in      - Login user
POST   /api/auth/sign-out     - Logout user
GET    /api/auth/session      - Get current session
```

## Performance Optimizations

1. **Turbopack** - 5x faster builds than Webpack
2. **Server Components** - Reduces client-side JavaScript
3. **Database Connection Singleton** - Prevents connection exhaustion
4. **API Response Caching** - Reduces external API calls
5. **Incremental Static Regeneration** - Faster page loads

## Security Features

- **Password Hashing** - Bcrypt via Better Auth
- **HTTP-Only Cookies** - Session tokens not accessible to JavaScript
- **CSRF Protection** - Automatic in Server Actions
- **Authorization Checks** - All queries filtered by userId
- **Middleware Protection** - Route-level authentication
- **Environment Variable Validation** - Prevents misconfigurations

## Known Limitations & Future Enhancements

### Current Limitations

1. **Alerts Not Monitored**
   - Alerts created but not automatically triggered
   - Requires: Inngest function to check prices hourly
   - Requires: Email notifications when threshold reached

2. **No Real-Time Watchlist Prices**
   - Watchlist shows symbols without current prices
   - Requires: Fetch current prices from Finnhub
   - Requires: WebSocket for live updates

3. **No Alert Editing**
   - Can only delete and recreate alerts
   - Update logic implemented, UI pending

4. **No Watchlist Filtering/Sorting**
   - Table not sortable
   - No search within watchlist

### Roadmap

**Phase 1 - Core Improvements**
- [ ] Implement alert monitoring system with hourly price checks
- [ ] Add real-time prices to watchlist table
- [ ] Build alert editing UI
- [ ] Add email notifications for triggered alerts

**Phase 2 - Enhanced Features**
- [ ] Table sorting and filtering
- [ ] Alert history and triggered alerts log
- [ ] Portfolio tracking (quantity, cost basis, gains/losses)
- [ ] Stock comparison tools
- [ ] Mobile app (React Native)

**Phase 3 - Advanced Analytics**
- [ ] Custom technical indicators
- [ ] Backtesting tools
- [ ] Social sentiment analysis
- [ ] Advanced charting with drawing tools

## Case Study Insights

### Technical Decisions

**Why Next.js 15?**
- Server Components reduce client-side JavaScript
- App Router provides better data fetching patterns
- Turbopack significantly speeds up development
- Built-in API routes simplify backend logic

**Why Inngest?**
- Durable, retryable background jobs
- Built-in monitoring and observability
- Type-safe event payloads
- Scales automatically without infrastructure changes

**Why Better Auth?**
- Modern, TypeScript-first authentication
- MongoDB adapter for seamless integration
- Flexible session management
- Active development and community support

**Why Mongoose over Prisma?**
- Better MongoDB support (Prisma MongoDB integration limited)
- Flexible schema design
- Middleware hooks for validation
- Established ecosystem

### Challenges & Solutions

**Challenge 1: Database Connection Exhaustion**
- Problem: Multiple concurrent requests creating new connections
- Solution: Singleton pattern for MongoDB connection
- File: `database/mongoose.ts`

**Challenge 2: Duplicate Watchlist Entries**
- Problem: Users could add same stock multiple times
- Solution: Unique compound index on `{ userId, symbol }`
- File: `database/models/watchlist.model.ts`

**Challenge 3: Stale UI After Server Actions**
- Problem: UI not updating after database mutations
- Solution: `router.refresh()` to revalidate server components
- Example: `components/WatchlistButton.tsx`

**Challenge 4: Personalized Email at Scale**
- Problem: Generating custom content for each user is slow
- Solution: Inngest parallel processing with AI batching
- File: `lib/inngest/functions.ts`

## Contributing

This is a private project for case study purposes. For inquiries, please contact the repository owner.

## License

Private - All rights reserved

## Acknowledgments

- [Finnhub](https://finnhub.io) - Real-time financial data API
- [TradingView](https://www.tradingview.com) - Interactive charts
- [Shadcn UI](https://ui.shadcn.com) - Component library
- [Better Auth](https://better-auth.com) - Authentication framework
- [Inngest](https://www.inngest.com) - Event-driven workflows
- [Google Gemini](https://deepmind.google/technologies/gemini/) - AI-powered content generation

---

**Built with** by Tarun 
**Last Updated:** October 2025
**Status:** Production Ready

For questions or support, please open an issue in the repository.
